## Phần 1. Intervals query.  

```bash
  ads

 ```

Boosting query bao gồm:  

adsss


## Phần 2. Match.  

**2.1 Match**  
```bash
  GET products/_search
    {
      "query": {
        "match": {
          "name": {
            "query": "Product 21"
          }
        }
      }
    }


 ```

Chú ý phần này có 2 loại 1 là `name` 2 là `name.keyword`,   

 - Trường `name.keyword` là một trường keyword trong Elasticsearch, được index dưới dạng not_analyzed. Do đó khi query, Elasticsearch sẽ tìm chính xác cụm từ "Product 21".  
 - Trường `name` là trường text thông thường, được phân tích (analyzed) khi index. Nên khi query "Product 21", nó sẽ được analyze thành các token riêng biệt.  
 - Kết quả là các document có chứa cả "Product" và "21" sẽ được match, ngay cả khi không phải cụm từ chính xác "Product 21".  
 - Do đó query name.keyword sẽ chính xác hơn khi muốn tìm một cụm từ cụ thể. Trong khi name sẽ match rộng hơn các từ liên quan.

 - `Như vậy, analyzed field thích hợp cho full-text search, còn not_analyzed field sử dụng cho các truy vấn chính xác.`

**2.2. Sử dụng match query works.**  

```bash
    GET products/_search
    {
      "query": {
        "match": {
          "name.keyword": {
            "query": "Product 21",
               "operator": "and"
          }
        }
      }
    }

```
`operator` sử dụng 2 key chính là `OR và AND`
 - Theo mặc định, match query sử dụng operator "OR" để kết hợp các keywords  
 - Tương đương với "Product OR 21"
 - Nghĩa là chỉ cần có một trong các từ khóa xuất hiện là document sẽ được match.
 - Tuy nhiên nếu thêm "operator": "and" thì các keywords sẽ được kết hợp bằng AND: "Product AND 21"
 - Lúc này document chỉ match khi có đủ CẢ 2 từ khóa trên.

**2.3. Fuzziness in the match query.**  
`fuzziness:` Cho phép match mức độ mờ (fuzzy) giữa các từ khóa truy vấn và các từ trong document. Ví dụ "AUTO" sẽ tự động xác định mức độ fuzzy match phù hợp.

```bash
    GET products/_search
    {
      "query": {
        "match": {
          "name": {
            "query": "productss",
            "fuzziness": "AUTO"
          }
        }
      }
    }

```
Cho phép match mờ các từ khóa, chấp nhận sai sót nhỏ trong chính tả, ví dụ từ khoá `products` nhưng tìm `productss` vẫn ra.    

**2.4. Zero terms query.**  
`zero_terms_query:` Xác định hành vi khi không có từ khóa nào trong truy vấn có mặt trong document. "all" có nghĩa là vẫn trả về tất cả document.

```bash
GET products/_search
{
  "query": {
    "match": {
      "name": {
        "query": "",
        "zero_terms_query": "all",
        "operator": "and"
      }
    }
  }
}

```
Có nghĩa là nếu không nhập gì thì hệ thống sẽ trả về rỗng

**2.5. Synonyms.**  
`auto_generate_synonyms_phrase_query:` Cho phép tự động tạo các synonym và phrase query từ các từ khóa truy vấn để mở rộng kết quả tìm kiếm. Giá trị false sẽ tắt tính năng này.

```bash
GET products/_search
{
  "query": {
    "match": {
      "name": {
        "query": "new york city",
        "auto_generate_synonyms_phrase_query": false
      }
    }
  }
}


```
Phần này có nghĩa là cho phép tìm các từ khóa tương tự liên quan nếu không có document.

## Phần 3. Match boolean prefix query.  

`"match_bool_prefix":`

```bash
    GET products/_search
    {
      "query": {
        "match_bool_prefix" : {
          "name" : "pa p"
        }
      }
    }
 ```

Khi bạn thực hiện truy vấn này với `"match_bool_prefix":` thì Elasticsearch sẽ thực hiện tìm kiếm các từ khoá tương ứng với prefix keyword mà bạn đã nhập.  
ví dụ keyword: `pro a` hoặc `a pro` thì trong document có chưa các từ khoá bắt đầu như "product 1" hoặc "anh teo" sẽ được tìm thấy

`"match_phrase_prefix":`

```bash
    GET products/_search
    {
      "_source": true,
      "size": 100,
      "query": {
        "match_phrase_prefix" : {
          "desc" : "5 bad"
        }
      }
  }
    }
 ```
Khi bạn thực hiện truy vấn này với `"match_phrase_prefix":` thì Elasticsearch sẽ thực hiện tìm kiếm các cụm từ khoá tương ứng với prefix keyword mà bạn đã nhập.  
ví dụ ta có content sau:  

```bash
{
  "content": "The brown fox is quick and agile"
}
```

Nếu keyword của chúng ta là `brown fox` thì sẽ tìm thấy còn `fox brown` thì không tìm thấy, `fo` thì vẫn tìm thấy


`analyzer`  -------- Cần tìm hiểu thêm

```bash
GET products/_search
{
  "query": {
    "match_bool_prefix": {
      "desc": {
        "query": "bad ",
        "analyzer": "keyword"
      }
    }
  }
}
```

Có 2 trường hợp:  
1. `analyzer: keyword` Thì Elasticsearch sẽ không thực hiện bất kỳ phân tích nào trên cụm từ "quick brown f". Nó sẽ coi toàn bộ cụm từ này là một từ duy nhất.  
2. `analyzer: standard` Thì Elasticsearch sẽ sử dụng một bộ phân tích mặc định, ví dụ "analyzer": "standard" (đây là bộ phân tích mặc định), thì cụm từ "quick brown f" có thể được phân tách thành các từ riêng lẻ trước khi thực hiện truy vấn  
